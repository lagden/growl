{"version":3,"file":"growl.js","sources":["../node_modules/lagden-utils/src/lib/common/detect.js","../node_modules/lagden-utils/src/lib/extend.js","../node_modules/lagden-utils/src/lib/transition-event.js","../src/index.js"],"sourcesContent":["'use strict';\n\nfunction detect(lista) {\n\tfor (let i = 0; i < lista.length; i++) {\n\t\tif (document.documentElement.style[lista[i][0]] !== undefined) {\n\t\t\treturn lista[i];\n\t\t}\n\t}\n\treturn lista[0];\n}\n\nexport default detect;\n","'use strict';\n\nfunction extend(a, b) {\n\tObject.keys(b).forEach(prop => {\n\t\ta[prop] = b[prop];\n\t});\n\treturn a;\n}\n\nexport default extend;\n","'use strict';\n\nimport detect from './common/detect';\n\nfunction transitionEvent() {\n\tconst VENDOR = [\n\t\t['transition', 'transitionend'],\n\t\t['MozTransition', 'mozTransitionEnd'],\n\t\t['OTransition', 'oTransitionEnd'],\n\t\t['webkitTransition', 'webkitTransitionEnd']\n\t];\n\treturn detect(VENDOR)[1];\n}\n\nexport default transitionEvent;\n","'use strict'\n\nimport {extend, transitionEvent} from 'lagden-utils'\n\nconst transitionEnd = transitionEvent()\n\nfunction last(arr) {\n\tconst length = arr === null ? 0 : arr.length\n\treturn length ? arr[length - 1] : undefined\n}\n\nfunction del(obj, prop) {\n\tobj[prop] = null\n\tif ('Reflect' in window) {\n\t\tReflect.deleteProperty(obj, prop)\n\t} else {\n\t\tdelete obj[prop]\n\t}\n}\n\nclass Growl {\n\tconstructor(opts = {}) {\n\t\tthis.opts = extend({\n\t\t\tduration: 7000,\n\t\t\toffset: 10,\n\t\t\tposition: 'right',\n\t\t\tcontainer: document.body\n\t\t}, opts)\n\t\tthis.items = []\n\t}\n\n\ttemplate(dados) {\n\t\tconst {title, msg} = dados\n\t\treturn [\n\t\t\t`<h3 class=\"growl__title\">${title}</h3>`,\n\t\t\t`<p class=\"growl__msg\">${msg}</p>`\n\t\t].join('')\n\t}\n\n\tnotifica(title, msg, colorCss = false) {\n\t\tconst offset = [this.opts.offset, this.opts.offset]\n\t\tconst r = {title, msg}\n\t\tconst lastItem = last(this.items)\n\t\tif (lastItem) {\n\t\t\toffset[0] = Number(lastItem.dataset.offset)\n\t\t\toffset[1] = offset[0] + lastItem.offsetHeight + this.opts.offset\n\t\t}\n\n\t\tconst item = document.createElement('div')\n\t\titem.insertAdjacentHTML('afterbegin', this.template(r))\n\t\titem.style.top = `${offset[1]}px`\n\t\titem.style[this.opts.position || 'right'] = `${this.opts.offset}px`\n\t\titem.dataset.offset = offset[1]\n\t\titem.classList.add('growl')\n\t\tif (typeof colorCss === 'string') {\n\t\t\titem.classList.add(colorCss)\n\t\t}\n\t\titem.addEventListener('click', this, false)\n\n\t\tconst docfrag = document.createDocumentFragment()\n\t\tdocfrag.appendChild(item)\n\n\t\tthis.items.push(item)\n\t\tthis.opts.container.appendChild(docfrag)\n\n\t\twindow.getComputedStyle(item).getPropertyValue('opacity')\n\t\titem.style.willChange = 'transform, opacity'\n\t\titem.classList.add('growl--show')\n\n\t\titem.tempo = setTimeout(() => {\n\t\t\tthis.animation(null, item)\n\t\t}, this.opts.duration)\n\t}\n\n\tanimation(event, item) {\n\t\tif (event) {\n\t\t\titem = event.currentTarget\n\t\t}\n\t\tclearTimeout(item.tempo)\n\t\tdel(item, 'tempo')\n\t\titem.addEventListener(transitionEnd, this, false)\n\t\titem.classList.add('growl--remove')\n\t}\n\n\tremove(event, item) {\n\t\tif (event) {\n\t\t\titem = event.currentTarget\n\t\t}\n\t\titem.style.willChange = 'auto'\n\t\titem.removeEventListener('click', this, false)\n\t\titem.removeEventListener(transitionEnd, this, false)\n\t\titem.parentElement.removeChild(item)\n\t\tconst index = this.items.findIndex(el => item === el)\n\t\tif (index > -1) {\n\t\t\tthis.items[index] = null\n\t\t\tthis.items.splice(index, 1)\n\t\t}\n\t}\n\n\thandleEvent(event) {\n\t\tswitch (event.type) {\n\t\t\tcase transitionEnd:\n\t\t\t\tthis.remove(event)\n\t\t\t\tbreak\n\t\t\tcase 'click':\n\t\t\t\tthis.animation(event)\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t}\n\t}\n}\n\nexport default Growl\n"],"names":["let","const"],"mappings":"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"}